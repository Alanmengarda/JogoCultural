const translations = {
  pt: {
    // TÃ­tulos principais
    gameTitle: "JOGO CULTURAL",
    flagGameTitle: "ðŸ§© Quebra-cabeÃ§a de Bandeiras",
    
    // Controles do jogo
    language: "Idioma",
    difficulty: "Dificuldade",
    easyLevel: "ðŸŸ¢ FÃ¡cil (5 pts)",
    normalLevel: "ðŸŸ¡ Normal (10 pts)",
    hardLevel: "ðŸ”´ DifÃ­cil (20 pts)",
    
    // BotÃµes
    nextQuestion: "PrÃ³xima Pergunta â†’",
    playAgain: "ðŸ”„ Jogar Novamente",
    saveScore: "ðŸ’¾ Salvar PontuaÃ§Ã£o",
    flagGame: "ðŸ§© Jogo das Bandeiras",
    backToMain: "â† Voltar ao Jogo Principal",
    restart: "ðŸ”„ Reiniciar Jogo",
    nextFlag: "âž¡ï¸ PrÃ³xima Bandeira",
    
    // Ranking
    ranking: "ðŸ† RANKING",
    
    // Progresso
    progress: "ðŸ“Š PROGRESSO",
    level: "NÃ­vel:",
    question: "Pergunta:",
    remaining: "Restantes:",
    points: "Pontos:",
    complete: "Completo",
    
    // EstatÃ­sticas
    statistics: "ðŸ“Š ESTATÃSTICAS",
    flag: "Bandeira:",
    hits: "Acertos:",
    hitRate: "Taxa de Acerto:",
    performance: "ðŸ“ˆ DESEMPENHO POR TEMA",
    focusOn: "ðŸ’¡ Foque em:",
    
    // Resultados
    gameOver: "ðŸŽ¯ Fim do Jogo!",
    finalScore: "Sua pontuaÃ§Ã£o final:",
    enterName: "Digite seu nome",
    bonusGame: "ðŸŽ® Jogar Mini-game BÃ´nus ðŸ‡§ðŸ‡·",
    
    // Respostas
    correctAnswer: "âœ… Resposta correta!",
    wrongAnswer: "âŒ Resposta errada!",
    correctWas: "A correta era:",
    
    // Mini-jogo
    puzzleDescription: "Arraste as peÃ§as da imagem real da bandeira para montar o quebra-cabeÃ§a",
    puzzlePieces: "ðŸŽ¯ PeÃ§as do Quebra-cabeÃ§a",
    assembleFlag: "ðŸ Monte a Bandeira",
    flagComplete: "âœ… Bandeira Completa!",
    levelComplete: "ðŸŽ‰ NÃ­vel {level} Completo!",
    flagsAssembled: "Bandeiras Montadas",
    perfect: "ðŸ† Perfeito! VocÃª Ã© um expert em bandeiras!",
    excellent: "â­ Excelente! Muito bem jogado!",
    goodJob: "ðŸ‘ Bom trabalho! Continue praticando!",
    
    // Mensagens do sistema
    scoreSaved: "PontuaÃ§Ã£o salva com sucesso! ðŸŽ‰\nSeus pontos foram somados ao seu total no ranking!",
    alreadySaved: "VocÃª jÃ¡ salvou sua pontuaÃ§Ã£o! Reinicie o jogo para jogar novamente.",
    scoreSavedSuccess: "âœ… PontuaÃ§Ã£o salva com sucesso!",
    pointsAdded: "Seus pontos foram somados ao ranking. Reinicie para jogar novamente.",
    alreadySavedMessage: "âœ… PontuaÃ§Ã£o jÃ¡ foi salva!\nReinicie o jogo para jogar novamente.",
    
    // NÃ­veis de dificuldade do mini-jogo
    easyMini: "ðŸŸ¢ FÃ¡cil (4 peÃ§as)",
    normalMini: "ðŸŸ¡ Normal (4 peÃ§as)",
    hardMini: "ðŸ”´ DifÃ­cil (4 peÃ§as)",
    
    // Temas sem traduÃ§Ã£o (mantidos como estÃ£o)
    noThemeAnswered: "Nenhum tema respondido ainda"
  },
  
  en: {
    // Main titles
    gameTitle: "CULTURAL GAME",
    flagGameTitle: "ðŸ§© Flag Puzzle",
    
    // Game controls
    language: "Language",
    difficulty: "Difficulty",
    easyLevel: "ðŸŸ¢ Easy (5 pts)",
    normalLevel: "ðŸŸ¡ Normal (10 pts)",
    hardLevel: "ðŸ”´ Hard (20 pts)",
    
    // Buttons
    nextQuestion: "Next Question â†’",
    playAgain: "ðŸ”„ Play Again",
    saveScore: "ðŸ’¾ Save Score",
    flagGame: "ðŸ§© Flag Game",
    backToMain: "â† Back to Main Game",
    restart: "ðŸ”„ Restart Game",
    nextFlag: "âž¡ï¸ Next Flag",
    
    // Ranking
    ranking: "ðŸ† RANKING",
    
    // Progress
    progress: "ðŸ“Š PROGRESS",
    level: "Level:",
    question: "Question:",
    remaining: "Remaining:",
    points: "Points:",
    complete: "Complete",
    
    // Statistics
    statistics: "ðŸ“Š STATISTICS",
    flag: "Flag:",
    hits: "Hits:",
    hitRate: "Hit Rate:",
    performance: "ðŸ“ˆ PERFORMANCE BY THEME",
    focusOn: "ðŸ’¡ Focus on:",
    
    // Results
    gameOver: "ðŸŽ¯ Game Over!",
    finalScore: "Your final score:",
    enterName: "Enter your name",
    bonusGame: "ðŸŽ® Play Bonus Mini-game ðŸ‡ºðŸ‡¸",
    
    // Answers
    correctAnswer: "âœ… Correct answer!",
    wrongAnswer: "âŒ Wrong answer!",
    correctWas: "The correct one was:",
    
    // Mini-game
    puzzleDescription: "Drag the pieces from the real flag image to assemble the puzzle",
    puzzlePieces: "ðŸŽ¯ Puzzle Pieces",
    assembleFlag: "ðŸ Assemble the Flag",
    flagComplete: "âœ… Flag Complete!",
    levelComplete: "ðŸŽ‰ Level {level} Complete!",
    flagsAssembled: "Flags Assembled",
    perfect: "ðŸ† Perfect! You are a flag expert!",
    excellent: "â­ Excellent! Very well played!",
    goodJob: "ðŸ‘ Good job! Keep practicing!",
    
    // System messages
    scoreSaved: "Score saved successfully! ðŸŽ‰\nYour points have been added to your total in the ranking!",
    alreadySaved: "You have already saved your score! Restart the game to play again.",
    scoreSavedSuccess: "âœ… Score saved successfully!",
    pointsAdded: "Your points have been added to the ranking. Restart to play again.",
    alreadySavedMessage: "âœ… Score already saved!\nRestart the game to play again.",
    
    // Mini-game difficulty levels
    easyMini: "ðŸŸ¢ Easy (4 pieces)",
    normalMini: "ðŸŸ¡ Normal (4 pieces)",
    hardMini: "ðŸ”´ Hard (4 pieces)",
    
    // Themes
    noThemeAnswered: "No theme answered yet"
  },
  
  es: {
    // TÃ­tulos principales
    gameTitle: "JUEGO CULTURAL",
    flagGameTitle: "ðŸ§© Rompecabezas de Banderas",
    
    // Controles del juego
    language: "Idioma",
    difficulty: "Dificultad",
    easyLevel: "ðŸŸ¢ FÃ¡cil (5 pts)",
    normalLevel: "ðŸŸ¡ Normal (10 pts)",
    hardLevel: "ðŸ”´ DifÃ­cil (20 pts)",
    
    // Botones
    nextQuestion: "Siguiente Pregunta â†’",
    playAgain: "ðŸ”„ Jugar de Nuevo",
    saveScore: "ðŸ’¾ Guardar PuntuaciÃ³n",
    flagGame: "ðŸ§© Juego de Banderas",
    backToMain: "â† Volver al Juego Principal",
    restart: "ðŸ”„ Reiniciar Juego",
    nextFlag: "âž¡ï¸ Siguiente Bandera",
    
    // Ranking
    ranking: "ðŸ† RANKING",
    
    // Progreso
    progress: "ðŸ“Š PROGRESO",
    level: "Nivel:",
    question: "Pregunta:",
    remaining: "Restantes:",
    points: "Puntos:",
    complete: "Completo",
    
    // EstadÃ­sticas
    statistics: "ðŸ“Š ESTADÃSTICAS",
    flag: "Bandera:",
    hits: "Aciertos:",
    hitRate: "Tasa de Acierto:",
    performance: "ðŸ“ˆ RENDIMIENTO POR TEMA",
    focusOn: "ðŸ’¡ EnfÃ³cate en:",
    
    // Resultados
    gameOver: "ðŸŽ¯ Â¡Fin del Juego!",
    finalScore: "Tu puntuaciÃ³n final:",
    enterName: "Ingresa tu nombre",
    bonusGame: "ðŸŽ® Jugar Mini-juego Bonus ðŸ‡ªðŸ‡¸",
    
    // Respuestas
    correctAnswer: "âœ… Â¡Respuesta correcta!",
    wrongAnswer: "âŒ Â¡Respuesta incorrecta!",
    correctWas: "La correcta era:",
    
    // Mini-juego
    puzzleDescription: "Arrastra las piezas de la imagen real de la bandera para armar el rompecabezas",
    puzzlePieces: "ðŸŽ¯ Piezas del Rompecabezas",
    assembleFlag: "ðŸ Arma la Bandera",
    flagComplete: "âœ… Â¡Bandera Completa!",
    levelComplete: "ðŸŽ‰ Â¡Nivel {level} Completo!",
    flagsAssembled: "Banderas Armadas",
    perfect: "ðŸ† Â¡Perfecto! Â¡Eres un experto en banderas!",
    excellent: "â­ Â¡Excelente! Â¡Muy bien jugado!",
    goodJob: "ðŸ‘ Â¡Buen trabajo! Â¡Sigue practicando!",
    
    // Mensajes del sistema
    scoreSaved: "Â¡PuntuaciÃ³n guardada con Ã©xito! ðŸŽ‰\nÂ¡Tus puntos han sido sumados a tu total en el ranking!",
    alreadySaved: "Â¡Ya has guardado tu puntuaciÃ³n! Reinicia el juego para jugar de nuevo.",
    scoreSavedSuccess: "âœ… Â¡PuntuaciÃ³n guardada con Ã©xito!",
    pointsAdded: "Tus puntos han sido sumados al ranking. Reinicia para jugar de nuevo.",
    alreadySavedMessage: "âœ… Â¡PuntuaciÃ³n ya guardada!\nReinicia el juego para jugar de nuevo.",
    
    // Niveles de dificultad del mini-juego
    easyMini: "ðŸŸ¢ FÃ¡cil (4 piezas)",
    normalMini: "ðŸŸ¡ Normal (4 piezas)",
    hardMini: "ðŸ”´ DifÃ­cil (4 piezas)",
    
    // Temas
    noThemeAnswered: "NingÃºn tema respondido aÃºn"
  }
};

// FunÃ§Ã£o para obter traduÃ§Ã£o
function t(key, params = {}) {
  const currentLang = document.getElementById("idioma")?.value || 'pt';
  let translation = translations[currentLang][key] || translations['pt'][key] || key;
  
  // Substituir parÃ¢metros na traduÃ§Ã£o
  Object.keys(params).forEach(param => {
    translation = translation.replace(`{${param}}`, params[param]);
  });
  
  return translation;
}

// FunÃ§Ã£o para atualizar toda a interface
function updateInterface() {
  const currentLang = document.getElementById("idioma")?.value || 'pt';
  
  // Atualizar tÃ­tulo principal
  const mainTitle = document.querySelector('h1');
  if (mainTitle) {
    mainTitle.textContent = t('gameTitle');
  }
  
  // Atualizar labels dos controles
  const languageLabel = document.querySelector('label[for="idioma"]');
  if (languageLabel) {
    languageLabel.textContent = t('language');
  }
  
  const difficultyLabel = document.querySelector('label[for="dificuldade"]');
  if (difficultyLabel) {
    difficultyLabel.textContent = t('difficulty');
  }
  
  // Atualizar opÃ§Ãµes de dificuldade
  const difficultySelect = document.getElementById('dificuldade');
  if (difficultySelect) {
    const options = difficultySelect.querySelectorAll('option');
    if (options.length >= 3) {
      options[0].textContent = t('easyLevel');
      options[1].textContent = t('normalLevel');
      options[2].textContent = t('hardLevel');
    }
  }
  
  // Atualizar botÃµes
  const nextButton = document.getElementById('proximo');
  if (nextButton) {
    nextButton.textContent = t('nextQuestion');
  }
  
  const saveButton = document.getElementById('botao-salvar');
  if (saveButton) {
    saveButton.textContent = t('saveScore');
  }
  
  const playAgainButtons = document.querySelectorAll('button[onclick="reiniciarJogo()"]');
  playAgainButtons.forEach(btn => {
    btn.textContent = t('playAgain');
  });
  
  // Atualizar botÃ£o do mini-jogo
  const flagGameButton = document.querySelector('.botao-minijogo');
  if (flagGameButton) {
    flagGameButton.textContent = t('flagGame');
  }
  
  // Atualizar placeholder do input de nome
  const nameInput = document.getElementById('nome-jogador');
  if (nameInput) {
    nameInput.placeholder = t('enterName');
  }
  
  // Atualizar link bonus
  const bonusLink = document.getElementById('link-bonus');
  if (bonusLink) {
    bonusLink.textContent = t('bonusGame');
  }
  
  // Atualizar tÃ­tulo do ranking
  const rankingTitle = document.querySelector('.ranking-sidebar h3');
  if (rankingTitle) {
    rankingTitle.textContent = t('ranking');
  }
  
  // Atualizar textos de resultado
  const gameOverTitle = document.querySelector('#resultado h2');
  if (gameOverTitle) {
    gameOverTitle.textContent = t('gameOver');
  }
  
  const finalScoreText = document.querySelector('#resultado p');
  if (finalScoreText && finalScoreText.textContent.includes('pontuaÃ§Ã£o') || finalScoreText.textContent.includes('score') || finalScoreText.textContent.includes('puntuaciÃ³n')) {
    finalScoreText.textContent = t('finalScore');
  }
  
  // ForÃ§ar atualizaÃ§Ã£o dos painÃ©is se estiverem visÃ­veis
  if (typeof atualizarPainelProgresso === 'function') {
    atualizarPainelProgresso();
  }
  
  if (typeof atualizarGraficoTemas === 'function') {
    atualizarGraficoTemas();
  }
}

// FunÃ§Ã£o para obter texto de dificuldade
function getDifficultyText(difficulty) {
  const difficultyTexts = {
    'facil': {
      'pt': 'ðŸŸ¢ FÃ¡cil',
      'en': 'ðŸŸ¢ Easy',
      'es': 'ðŸŸ¢ FÃ¡cil'
    },
    'normal': {
      'pt': 'ðŸŸ¡ Normal',
      'en': 'ðŸŸ¡ Normal',
      'es': 'ðŸŸ¡ Normal'
    },
    'dificil': {
      'pt': 'ðŸ”´ DifÃ­cil',
      'en': 'ðŸ”´ Hard',
      'es': 'ðŸ”´ DifÃ­cil'
    }
  };
  
  const currentLang = document.getElementById("idioma")?.value || 'pt';
  return difficultyTexts[difficulty][currentLang] || difficultyTexts[difficulty]['pt'];
}